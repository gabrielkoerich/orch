project_dir: ""  # Auto-detected from CWD, override if needed
workflow:
  auto_close: true
  review_owner: "@owner"
  enable_review_agent: false
  review_agent: "claude"
  max_attempts: 10
  # Only accept issues from these GitHub users. Repo owner is always included.
  # allowed_authors:
  #   - my-bot
  #   - trusted-collaborator
  # Default task timeout (seconds). Set to 0 to disable timeouts entirely.
  timeout_seconds: 1800
  # Optional: per-complexity overrides (takes precedence over timeout_seconds).
  # timeout_by_complexity:
  #   simple: 600
  #   medium: 1800
  #   complex: 3600
router:
  mode: "llm"  # "llm" (default) or "round_robin"
  agent: "claude"
  model: "haiku"
  timeout_seconds: 120
  fallback_executor: "codex"
  max_route_attempts: 3  # After N LLM routing failures, fall back to round-robin
  # Enable weighted round-robin: deprioritize agents hitting rate limits.
  # Agents that return 429/rate limit errors get reduced routing weight,
  # which gradually recovers as rate limit windows expire.
  weighted_round_robin: false
  # Agents to discover in PATH (checked at startup)
  agents:
    - claude
    - codex
    - opencode
    - kimi
    - minimax
  allowed_tools:
    - yq
    - jq
    - bash
    - just
    - git
    - rg
    - sed
    - awk
    - python3
    - node
    - npm
    - bun
  default_skills:
    - gh
    - git-worktree
model_map:
  simple:
    claude: haiku
    codex: gpt-5.1-codex-mini
    opencode: github-copilot/gpt-5-mini
    kimi: haiku
    minimax: haiku
  medium:
    claude: sonnet
    codex: gpt-5.2
    opencode: github-copilot/gpt-5.1-codex
    kimi: sonnet
    minimax: sonnet
  complex:
    claude: opus
    codex: gpt-5.3-codex
    opencode: github-copilot/claude-opus-4.5
    kimi: opus
    minimax: opus
  review:
    claude: sonnet
    codex: gpt-5.2
    opencode: github-copilot/gpt-5.1-codex
    kimi: sonnet
    minimax: sonnet
  # Free models used as fallback when hitting usage limits (round-robin)
  free:
    - opencode/glm-5-free
    - opencode/minimax-m2.5-free
    - opencode/trinity-large-preview-free
llm:
  input_format: ""
  output_format: "json"
gh:
  enabled: true
  repo: "owner/repo"
  sync_label: "sync"
  project_id: ""
  project_status_field_id: ""
  project_status_names: {}
  project_status_map:
    backlog: ""
    in_progress: ""
    review: ""
    done: ""
  backoff:
    mode: "wait"
    base_seconds: 30
    max_seconds: 900

# GitHub webhook server for instant event delivery (bypasses polling)
webhook:
  enabled: false
  port: 8080
  secret: "${WEBHOOK_SECRET}"

# Engine settings
engine:
  tick_interval: 10
  sync_interval: 120
  fallback_sync_interval: 30
  webhook_health_check_interval: 60
  max_parallel: 4
  stuck_timeout: 1800

# Task completion notifications — broadcast to all configured channels.
# Level controls which events are sent:
#   all         — every task completion (default)
#   errors_only — only failures (needs_review, blocked, failed)
#   none        — disable notifications
notifications:
  level: "all"

# External notification channels
channels:
  telegram:
    enabled: true
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
  discord:
    enabled: true
    bot_token: "${DISCORD_BOT_TOKEN}"
    channel_id: "${DISCORD_CHANNEL_ID}"
